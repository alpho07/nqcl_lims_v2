<html>
    <style>
        .select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container[dir="rtl"] .select2-selection--single .select2-selection__rendered{padding-right:8px;padding-left:20px}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:white;border:1px solid #aaa;border-radius:4px;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;user-select:none;-webkit-user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff;filter:alpha(opacity=0)}.select2-hidden-accessible{border:0 !important;clip:rect(0 0 0 0) !important;height:1px !important;margin:-1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default[dir="rtl"] .select2-selection--single .select2-selection__clear{float:left}.select2-container--default[dir="rtl"] .select2-selection--single .select2-selection__arrow{left:1px;right:auto}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--default .select2-selection--multiple{background-color:white;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice,.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__placeholder,.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-search--inline{float:right}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--default[dir="rtl"] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--default.select2-container--focus .select2-selection--multiple{border:solid black 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--single,.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--single,.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:transparent;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:white}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic .select2-selection--single{background-color:#f7f7f7;border:1px solid #aaa;border-radius:4px;outline:0;background-image:-webkit-linear-gradient(top, #fff 50%, #eee 100%);background-image:-o-linear-gradient(top, #fff 50%, #eee 100%);background-image:linear-gradient(to bottom, #fff 50%, #eee 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0)}.select2-container--classic .select2-selection--single:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--classic .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-right:10px}.select2-container--classic .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--classic .select2-selection--single .select2-selection__arrow{background-color:#ddd;border:none;border-left:1px solid #aaa;border-top-right-radius:4px;border-bottom-right-radius:4px;height:26px;position:absolute;top:1px;right:1px;width:20px;background-image:-webkit-linear-gradient(top, #eee 50%, #ccc 100%);background-image:-o-linear-gradient(top, #eee 50%, #ccc 100%);background-image:linear-gradient(to bottom, #eee 50%, #ccc 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFCCCCCC', GradientType=0)}.select2-container--classic .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--classic[dir="rtl"] .select2-selection--single .select2-selection__clear{float:left}.select2-container--classic[dir="rtl"] .select2-selection--single .select2-selection__arrow{border:none;border-right:1px solid #aaa;border-radius:0;border-top-left-radius:4px;border-bottom-left-radius:4px;left:1px;right:auto}.select2-container--classic.select2-container--open .select2-selection--single{border:1px solid #5897fb}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow{background:transparent;border:none}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single{border-top:none;border-top-left-radius:0;border-top-right-radius:0;background-image:-webkit-linear-gradient(top, #fff 0%, #eee 50%);background-image:-o-linear-gradient(top, #fff 0%, #eee 50%);background-image:linear-gradient(to bottom, #fff 0%, #eee 50%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFFFF', endColorstr='#FFEEEEEE', GradientType=0)}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;background-image:-webkit-linear-gradient(top, #eee 50%, #fff 100%);background-image:-o-linear-gradient(top, #eee 50%, #fff 100%);background-image:linear-gradient(to bottom, #eee 50%, #fff 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEEEEE', endColorstr='#FFFFFFFF', GradientType=0)}.select2-container--classic .select2-selection--multiple{background-color:white;border:1px solid #aaa;border-radius:4px;cursor:text;outline:0}.select2-container--classic .select2-selection--multiple:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--multiple .select2-selection__rendered{list-style:none;margin:0;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__clear{display:none}.select2-container--classic .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove{color:#888;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover{color:#555}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice{float:right}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--classic[dir="rtl"] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--classic.select2-container--open .select2-selection--multiple{border:1px solid #5897fb}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--classic .select2-search--dropdown .select2-search__field{border:1px solid #aaa;outline:0}.select2-container--classic .select2-search--inline .select2-search__field{outline:0;box-shadow:none}.select2-container--classic .select2-dropdown{background-color:#fff;border:1px solid transparent}.select2-container--classic .select2-dropdown--above{border-bottom:none}.select2-container--classic .select2-dropdown--below{border-top:none}.select2-container--classic .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--classic .select2-results__option[role=group]{padding:0}.select2-container--classic .select2-results__option[aria-disabled=true]{color:grey}.select2-container--classic .select2-results__option--highlighted[aria-selected]{background-color:#3875d7;color:#fff}.select2-container--classic .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic.select2-container--open .select2-dropdown{border-color:#5897fb}

        
    </style>
    <script>
        $(document).ready(function(){
            $('.select2').select2();
			$('.redate,.rodate,.expiry,.edlc,.ednc').datepicker({
				changeMonth:true,
				changeyear:true
			});
        })
        </script>

   <html>

    <form  action="<?php echo base_url() . 'chroma_conditions/saveBatch/' . $labref . '/' . $test_id; ?>" method="POST">
        <center style="font-weight: bolder;">SAMPLE RSE BATCH PROCESSING</center>

        <center><table>
                <thead>
                <th>LOAD PREVIOUS DATA</th>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">
                            <select name="processor" id="processor_done" class="select2">
                                <option value="2">-Select Labref-</option>
                                <?php foreach ($labrefsd as $l): ?>
                                    <option value="<?php echo $l->lab_ref_no; ?>"><?php echo $l->lab_ref_no; ?></option>  
                                <?php endforeach; ?>
                            </select>
                        </td>

                </tbody>

            </table></center>
        <p style="color:red; font-weight: bolder;">**All fields are required to save**</p>


        <table style="position: absolute; float: right; margin-left: 900px; margin-top: 40px;" id="batch_table">
            <thead>
                <tr>
                    <th colspan="2">
                        <select name="processor" id="processor">
                            <option value="2">Single/Batch Processing</option>
                        </select>
                    </th>
                <tr>
                    <th>Request ID#</th>
                    <th><a href="#addLAB" id="addLAB">+Add</a></th>
                </tr>                    
            </thead>
            <tbody>

                <tr>
                    <td>
                        <select name="labref[]" id="processor" class="select2">
                            <option value="<?php echo $labref; ?>"><?php echo $labref; ?></option>                              
                        </select>
                    </td>
                    <td>(Default)</td>
                </tr>
            </tbody>
        </table>

        <div>

            <legend title="Click to expand."><a id="eqpmnt_show" class="div_show" href="#"><span id="eqmnt_plus">+</span>&nbsp;Equipment Used</a></legend>

            <div id = "equipment"  >
                <hr />
                <table border="0" cellpadding="0" cellspacing="0" id="equipT">

                    <thead>
                        <tr>

                            <th>Equipment Name</th>
                            <th>NQCL No/Code</th>
                            <th>Date of Last Calibration</th>
                            <th>Date of Next Calibration</th>
                            <th><a href="#addEquip" id="addEquip" >+Add</a></th>
                        </tr>
                    </thead>

                    <tbody  >
                        <tr>
                            <td><input type="text" class="equipment" name="ename[]" required/></td>
                            <td><input type="text" class="ecode" name="ecode[]" required/></td>
                            <td><input type="text" class="edlc" name="edlc[]" required/></td>
                            <td><input type="text" class="ednc" name="ednc[]" required/></td>
                            <td></td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
        <!--div id="items">Data</div-->

        <div>
            <legend title="Click to expand."><a id="chems_show" class="div_show" href="#"><span class="minus_plus">+</span>&nbsp;Reagents Used</a></legend>

            <div class="hidden2">
                <hr />
                <table border="0" cellpadding="0" cellspacing="0" id="ReagentT">
                    <thead>
                        <tr>

                            <th>Reagent Name</th>
                            <th>Manufacturer</th>
                            <th>Lot/Batch No.</th>
                            <th>Opened Date</th>
                            <th>Expiry Date</th>
                            <th><a href="#addReagent" id="addReagent" >+Add</a></th>
                        </tr>
                    </thead>

                    <tbody  >
                        <tr>
                            <td><input type="text" class="reagents" name="rname[]" required/></td>
                            <td><input type="text" class="MFG" name="rmfg[]" required/></td>
                            <td><input type="text" class="Rbatch" name="rbatch[]" required/></td>
                            <td><input type="text" name="rodate[]" required/></td>
                            <td><input type="text" name="redate[]" required/></td>
                            <td></td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>




        <div>	

            <legend>
                <a id="references_show" class="div_show" href="#">
                    <span class="minus_plus">+</span>&nbsp;Reference Standards</a>
            </legend>


            <div id = "references" class="hidden2" >
                <hr />
                <table border="0" cellpadding="0" cellspacing="0" id="StandardT">
                    <thead>
                        <tr>

                            <th>Reference Substance</th>
                            <th>Lot/Batch No.</th>
                            <th>Potency</th>
                            <th>Expiry Date</th>
                            <th><a href="#addStandard" id="addStandrd" >+Add</a></th>
                        </tr>
                    </thead>

                    <tbody  >
                        <tr>
                            <td><input type="text" class="refsubs" name="sname[]" required/></td>
                            <td><input type="text" class="sbatch" name="sbatch[]" required/></td>
                            <td><input type="text" class="potency" name="spot[]" required/></td>
                            <td><input type="text" class="expiry" name="sedate[]" required/></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>




        <div>
            <legend>
                <a id="chroma_conditions" class="div_show" href="#">
                    <span class="minus_plus">+</span>&nbsp;Assay Chromatographic System</a>
            </legend>

            <div class="hidden2">
                <hr />
                <table id="tests">

                    <tr>
                        <td><label for="column_type" >Column No.</label></td><td><input type="text" id="cnoA" class="cnoA" name="cnoA" placeholder="e.g. 198"  /></td>
                    </tr>
                    <tr>
                        <td><label for="column_type" >Column  Type</label></td><td><input type="text" id="ctypeA" class="ctypeA" name="ctype" /></td>
                        <td><label for="column_temp" >Column Temp (ºC)</label></td><td><input type="text" id="ctemp" name="ctemp"  /></td>
                    </tr>
                    <tr>
                        <td><label for="detection" >Detection λ (nm)</label></td><td><input type="text"id="cdet" name="cdet" value=""  /></td>
                        <td><label for="injection" >Injection Vol (μL)</label></td><td><input type="text" id="cin" name="cin" value=""  /></td>
                    </tr>
                    <tr>
                        <td><label for="flow_rate" >Flow Rate (mL/min)</label></td><td><input type="text" name="cra" id="cra" value=""  /></td>
                        <td><label for="pump_pressure" >Pump Pressure (bars)</label></td><td><input type="text" name="cpr" id="cpr" value=""  /></td>
                    </tr>
                    <tr>
                        <td><label for="wave_length" >Mobile Phase</label></td><td colspan="2"><textarea  id="mobile_phase" name="mobile_phase"  ></textarea></td>
                    </tr>	
                </table>


            </div>

        </div>


        <div>
            <legend>
                <a id="chroma_conditions" class="div_show" href="#">
                    <span class="minus_plus">+</span>&nbsp;Dissolution Chromatographic System</a>
            </legend>

            <div class="hidden2">
                <hr />
                <table id="testsDis">

                    <tr>
                        <td><label for="column_type" >Column No.</label></td><td><input type="text" id="cnoD" name="cnoD" placeholder="e.g. 198"  /></td>

                    </tr>
                    <tr>
                        <td><label for="column_type" >Column Type</label></td><td><input type="text" id="cdtypeD" name="cdtype" placeholder="e.g. C18"  /></td>
                        <td><label for="column_temp" >Column Temp (ºC)</label></td><td><input type="text" id="cdtemp" name="cdtemp"  /></td>
                    </tr>
                    <tr>
                        <td><label for="detection" >Detection λ (nm)</label></td><td><input type="text"id="cddet" name="cddet" value=""  /></td>
                        <td><label for="injection" >Injection Vol (μL)</label></td><td><input type="text" id="cdin" name="cdin" value=""  /></td>
                    </tr>
                    <tr>
                        <td><label for="flow_rate" >Flow Rate (mL/min)</label></td><td><input type="text" name="cdra" id="cdra" value=""  /></td>
                        <td><label for="pump_pressure" >Pump Pressure (bars)</label></td><td><input type="text" name="cdpr" id="cdpr" value=""  /></td>
                    </tr>
                    <tr>
                        <td><label for="wave_length" >Mobile Phase</label></td><td colspan="2"><textarea  id="mobile_phased" name="mobile_phased"  ></textarea></td>
                    </tr>	
                </table>


            </div>

        </div>



        <script>
            $(document).ready(function () {
                $class='';
                window.onmouseup = function (e) {
                    $table =e.target.className;
                    $class='.'+$table;
                    $actual = "'"+$class+"'";
                
                   $($class).autocomplete({
                        source: function (request, response) {
                            $.ajax({url: "<?php echo site_url('chroma_conditions/suggestions_table'); ?>/"+$table.replace("%20ui-autocomplete-input",''),
                                data: {term: $($class,this).val()},
                                dataType: "json",
                                type: "POST",
                                success: function (data) {
                                    response(data);
                                }
                            });
                        },
                        minLength: 1,
                        Delay: 100
                    });
                    
                };
                
                $('#cnoA').focusout(function(){
                 $('.ctypeA').val(''); 
                  $.getJSON("<?php echo base_url();?>chroma_conditions/loadColumns/"+$(this).val(),function(r){
                        $.each(r, function(i, data) {
                         
                            $('.ctypeA').val(data.column_type); 
                        });

                  }).fail(function(e){
                      console.log(e)
                  });
                });
                $('#cnoD').focusout(function(){
                 $('#cdtypeD').val(''); 
                  $.getJSON("<?php echo base_url();?>chroma_conditions/loadColumns/"+$(this).val(),function(r){
                        $.each(r, function(i, data) {
                         
                            $('#cdtypeD').val(data.column_type); 
                        });

                  }).fail(function(e){
                      console.log(e)
                  });
                });
                
                
                $(document).on("click", "#equipT tr", function () {
                $row = $(this).closest('tr');
            

                  major = $row.find('input.equipment').val();
                  $.getJSON("<?php echo base_url();?>chroma_conditions/getCodes/equipment",{eq:major},function(r){
                        $.each(r, function(i, data) {
                         
                            $row.find('input.ecode').val(data.nqcl_no); 
                        });

                  }).fail(function(e){
                      console.log(e)
                  });
                  

                
                });
                
                $(document).on("click", "#ReagentT tr", function () {
                $row = $(this).closest('tr');
            

                  major = $row.find('input.reagents').val();
                  $.getJSON("<?php echo base_url();?>chroma_conditions/getCodes/reagents",{eq:major},function(r){
                        $.each(r, function(i, data) {                          
                            $row.find('input.MFG').val(data.manufacturer); 
                            $row.find('input.Rbatch').val(data.batch_no); 
                        });

                  }).fail(function(e){
                      console.log(e)
                  });
                  

                
                });
                
                
                $(document).on("click", "#StandardT tr", function () {
                $row = $(this).closest('tr');
            

                  major = $row.find('input.refsubs').val();
                  $.getJSON("<?php echo base_url();?>chroma_conditions/getCodes/refsubs",{eq:major},function(r){
                        $.each(r, function(i, data) {
                            potency =parseFloat(data.potency);
                            $row.find('input.sbatch').val(data.batch_no); 
                            $row.find('input.potency').val(potency.toFixed(2)); 
                            $row.find('input.expiry').val(data.date_of_expiry); 
                        });

                  }).fail(function(e){
                      console.log(e)
                  });
                  

                
                });

       
                
                
         
                
                
                 
                $('.div_show').click(function () {

                    $(this).parent().next().slideToggle();


                });
                
                $('#addEquip').click(function () {
                    $equiprow = ' <tr><td><input type="text" class="equipment" name="ename[]" required/></td><td><input type="text" name="ecode[]" class="ecode" required/></td><td><input type="text" name="edlc[]" required/></td><td><input type="text" name="ednc[]" required/></td> <td><a href="#addEquip" class="removeEquip" >-Rem</a></td></tr>';
                    $('#equipT tbody').append($equiprow);
                });
                $(document).on('click', '.removeEquip', function () {
                    $(this).closest('tr').remove();
                });

                $('#addReagent').click(function () {
                    $equiprow = ' <tr><td><input type="text" class="reagents"  name="rname[]" required/></td><td><input type="text" name="rmfg[]" class="MFG" required/></td><td><input type="text" name="rbatch[]" class="Rbatch" required/></td><td><input type="text" name="rodate[]" required/></td> <td><input type="text" name="redate[]" required/></td><td><a href="#addReagent" class="remReagent" >-Rem</a></td></tr>';
                    $('#ReagentT tbody').append($equiprow);
                });
                $(document).on('click', '.remReagent', function () {
                    $(this).closest('tr').remove();
                });

                $('#addStandrd').click(function () {
                    $equiprow = '<tr><td><input type="text" class="refsubs"  name="sname[]" required/></td><td><input type="text" class="sbatch" name="sbatch[]" required/></td> <td><input type="text" class="potency" name="spot[]" required/></td><td><input type="text" name="sedate[]" class="expiry" required/></td><td><a href="#remStndrd" class="remStndrd" >-Rem</a></td></tr>';
                    $('#StandardT tbody').append($equiprow);
                });
                $(document).on('click', '.remStndrd', function () {
                    $(this).closest('tr').remove();
                });


                $('#addLAB').click(function () {

                    $row = '<tr><td><select name="labref[]" id="processor" class="select2"><?php foreach ($labrefs as $l): ?><option value="<?php echo $l->lab_ref_no; ?>"><?php echo $l->lab_ref_no; ?></option><?php endforeach; ?></select></td><td><a href="#remLAB" class="remLAB"> -remove</a></td></td></tr>';
                    $('#batch_table tbody').append($row);
                    return false;

                });

                $(document).on('click', ' .remLAB', function () {
                    $(this).closest('tr').remove();

                });


                $('#processor_done').change(function () {
                    base_url = "<?php echo base_url(); ?>chroma_conditions/";
                    labref = $(this).val();
                    $('.hidden2').prop('class', '');

                    $.getJSON(base_url + 'getStandardsJ/' + labref, function (resp) {

                        $('#StandardT tbody').empty();
                        $('#StandardT').slideDown();
                        $.each(resp, function (i, e) {
                            $equiprow = '<tr><td><input type="text" value=' + e.refsub + ' name="sname[]" required/></td><td><input value=' + e.nqcl_code + ' type="text" name="sbatch[]" required/></td> <td><input type="text" name="spot[]" value=' + e.potency + ' required/></td><td><input type="text" name="sedate[]" value=' + e.expiry_date + ' required/></td><td><a href="#remStndrd" class="remStndrd" >-Rem</a></td></tr>';
                            $('#StandardT tbody').append($equiprow);
                        });
                    }).fail(function () {
                        alert('an error occured while getting Equipments Data');
                    });

                    $.getJSON(base_url + 'getEquipmentJ/' + labref, function (resp) {
                        $('#equipT tbody').empty();
                        $('#equipT').slideDown();
                        $.each(resp, function (i, e) {
                            $equiprow = ' <tr><td><input type="text" name="ename[]" value=' + e.equipment + ' required/></td><td><input type="text" name="ecode[]" value=' + e.nqcl_code + ' required/></td><td><input type="text" name="edlc[]" value=' + e.last_calibrated + ' required/></td><td><input type="text" name="ednc[]" value=' + e.next_calibration + ' required/></td> <td></td></tr>';
                            $('#equipT tbody').append($equiprow);
                        });
                    }).fail(function () {
                        alert('an error occured while getting Equipments Data');
                    });

                    $.getJSON(base_url + 'getReagentsJ/' + labref, function (resp) {
                        $('#ReagentT tbody').empty();
                        $.each(resp, function (i, e) {
                            $equiprow = ' <tr><td><input type="text" name="rname[]" value=' + e.reagent + ' required/></td><td><input type="text" value=' + e.manufacturer + ' name="rmfg[]" required/></td><td><input type="text" name="rbatch[]" value=' + e.batch_no + ' required/></td><td><input type="text" value=' + e.date_opened + ' name="rodate[]" required/></td> <td><input type="text" value=' + e.expiry_date + ' name="redate[]" required/></td><td><a href="#addReagent" class="remReagent" >-Rem</a></td></tr>';
                            $('#ReagentT tbody').append($equiprow);
                        });
                    }).fail(function () {
                        alert('an error occured while getting Equipments Data');
                    });

                    $.getJSON(base_url + 'getColumnsChromaCAJ/' + labref, function (resp) {
                        $.each(resp, function (i, e) {
                            $('#cnoA').val(e.column_id);
                            $('#ctypeA').val(e.column_type);
                            $('#ctemp').val(e.column_temp);
                            $('#cdet').val(e.detection);
                            $('#cin').val(e.injection);
                            $('#cra').val(e.flow_rate);
                            $('#cpr').val(e.pump_pressure);
                            $('#mobile_phase').val(e.mobile_phase);
                        });
                    }).fail(function () {
                        alert('an error occured while getting Equipments Data');
                    });

                    $.getJSON(base_url + 'getColumnsChromaCDJ/' + labref, function (resp) {
                        $.each(resp, function (i, e) {
                            $('#cnoD').val(e.column_id);
                            $('#cdtypeD').val(e.column_type);
                            $('#cdtemp').val(e.column_temp);
                            $('#cddet').val(e.detection);
                            $('#cdin').val(e.injection);
                            $('#cdra').val(e.flow_rate);
                            $('#cdpr').val(e.pump_pressure);
                            $('#mobile_phased').val(e.mobile_phase);
                        });
                    }).fail(function () {
                        alert('an error occured while getting Equipments Data');
                    });

                });






            });
        </script>	

        <input type="submit" value="Save" class="submit-button"/>
    </form>
</html>